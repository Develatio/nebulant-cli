<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <link rel="shortcut icon" type="image/x-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABMCAYAAADdq7GlAAADBUlEQVR4Ad3aAWSVcRQF8FmaqjVJCDbLIIVKAgUZFSBQRAQTSAgF8n9vsRAyIW/b+4go1AAqCVUoSUjBmIZCZlZtLJvTuYRrqN13qXfv5bDnfbb5MTv3eh0TNcxY0xzGhUbB+o42HgCnmWfM9J8iAGglYwWD7YwAYIiZwl/GDKAyT4QjVcG6dACGzDQLDghCPgA7QmdCAANCDQMGhHQAIMB7pi8hgCF13Kvq6MkHYAgBGtUwtuQDMIQA1wUhJ4ABoXkVG7MBLFmel8o8XrAhDUCzjkkrAgHOSmVOAVCNoJ8ID/j1T2NlHpS2mAKgKuhp1vCUr5ctCLoyhwaQb14V9PL1G0Hw7w0BAVYhrFgQqoL9TGd0AI0wJQjGyrwzBYBMo2AP35s2/jd5ydq8NQWAzHjBcb4/Z94b2BZTAMhMFJzkM9/8lTkogMxYwcVWECbq2JwBQCP8MP45XJG9IQWAzHgNdT6/aN0bpDLHBtAIBaO6MltO7SkAflfmJ9IWHaf2mAAawVOZwwP49wZ0RgfQCG+ZFcepPSyArsxTjlN7aACNMOc4tYcG0JV53nFqDwug2+KQY2+ID+DZG6QyZwDQCIuOU3tYAF2ZbzhO7fEBZDyn9hQA6tQuCMtrzGyzYJ8Upf8OAGA7029M9+q2SITH/DmvDLkveO0AcJh5Ads8Zw4luAm6ECaZvWluggBOMO8cCEEB/Ah3mN0ZAPTHVD8YERrMQAoAwy+gZ4G5xGzLArCJucbMGhHOM93RATTCKPPdgPCVOScI0QF0SbrlR4gG4Ef4xJxiulKcxAD0MXeZJQdC7IsQgF3MQ39lDgrgqMyPmIMpALyVOQGAHyEFgLcyJwAwV2Y9I8yONDdBAJeZL/69IS6A3hvsbTEcwD+ozLEA/AhnmK7wAArhtrcyhwVw7A0fmWMpAPyn9uAACuEo87qVtpgCwFmZbyYAcCEsMEspAByVGWkANEJCAHtlTghgP7UnBLBX5twABoT8APbKnB9An9qzA9j3BgPA57WGAL3tCOBoi/gFAXfqC2SJNlAAAAAASUVORK5CYII=">
    <title>Nebulant CLI Proxy</title>
    <script type="module" crossorigin>(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}})();const h=new Map;class w{fetch(s,n={},r={}){let{__request_id:e,timeout:o}=r,u;e||(e=`${new Date().getTime()}-${Math.random()}`);const t=new AbortController;if(h.has(e)){const f=[...h.get(e).abortControllers,t];h.set(e,{abortControllers:f}),f[0].abort("Abort")}else h.set(e,{abortControllers:[t]});return o&&(u=setTimeout(()=>t.abort("Timeout"),o)),r.signal=t.signal,delete r.__request_id,delete r.timeout,new Promise((d,f)=>{const{signal:b}=r;fetch(s,{...Object.keys(n).length>0&&{body:JSON.stringify(n)},...b&&{signal:b},...r}).then(a=>{a.ok?a.text().then(c=>{try{c=JSON.parse(c),d({data:c,status:a.status})}catch{d({data:c,status:a.status})}}).catch(c=>{d({data:null,status:a.status})}):a.text().then(c=>{try{c=JSON.parse(c),f({data:c,response:!0,status:a.status})}catch{f({data:null,response:!0,status:a.status})}}).catch(c=>{f({data:null,response:!0,status:a.status})})}).catch(a=>{f({error:a,response:!1})}).finally(()=>{clearTimeout(u);const a=h.get(e);a.abortControllers.splice(0,1),a.abortControllers.length===0?h.delete(e):h.set(e,a)})})}get(s,n){return this.fetch(s,{},{method:"GET",...n})}post(s,n,r){return this.fetch(s,n,{method:"POST",...r})}patch(s,n,r){return this.fetch(s,n,{method:"PATCH",...r})}}let g="*",m=null;const y=i=>{let{command:s,target:n,data:r,opts:e,msgid:o,nebulant:u}=i.data;if(u)switch(s){case"openws":m=new WebSocket(n),m.onopen=t=>{t={type:t.type},l({command:"onWebSocketOpen",status:"ok",data:t})},m.onclose=t=>{t={wasClea:t.wasClean,code:t.code,reason:t.reason},l({command:"onWebSocketClose",status:"ok",data:t})},m.onerror=t=>{t={message:t.message,error:t.error},l({command:"onWebSocketError",status:"ko",data:t})},m.onmessage=t=>{t={data:t.data,origin:t.origin},l({command:"onWebSocketMessage",status:"ok",data:t})};break;case"closews":if(m){try{m.close(r.status)}catch{}m=null}break;case"get":new w().get(n,e).then(t=>{t=structuredClone(t),l({command:"command_reply",msgid:o,status:"ok",data:t})}).catch(t=>{const d=structuredClone(t);l({command:"command_reply",msgid:o,status:"ko",data:d})});break;case"post":new w().post(n,r,e).then(t=>{t=structuredClone(t),l({command:"command_reply",msgid:o,status:"ok",data:t})}).catch(t=>{const d=structuredClone(t);l({command:"command_reply",msgid:o,status:"ko",data:d})});break}},l=i=>{const s=window.opener;s&&(s.closed||s.postMessage({...i,nebulant:!0},g))};window.onload=()=>{g=new URLSearchParams(window.location.search).get("targetOrigin"),l({command:"onLoaded",status:"ok"})};window.onbeforeunload=function(){l({command:"onUnload",status:"ok"})};window.onunload=function(){window.close()};window.addEventListener("message",i=>{const{protocol:s,host:n,port:r}=new URL(i.origin);if(`${s}//${n}${r?":":""}${r||""}`===g)try{y(i)}catch(o){console.error(o)}});
</script>
    <style rel="stylesheet" crossorigin>body{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABMCAYAAADdq7GlAAADBUlEQVR4Ad3aAWSVcRQF8FmaqjVJCDbLIIVKAgUZFSBQRAQTSAgF8n9vsRAyIW/b+4go1AAqCVUoSUjBmIZCZlZtLJvTuYRrqN13qXfv5bDnfbb5MTv3eh0TNcxY0xzGhUbB+o42HgCnmWfM9J8iAGglYwWD7YwAYIiZwl/GDKAyT4QjVcG6dACGzDQLDghCPgA7QmdCAANCDQMGhHQAIMB7pi8hgCF13Kvq6MkHYAgBGtUwtuQDMIQA1wUhJ4ABoXkVG7MBLFmel8o8XrAhDUCzjkkrAgHOSmVOAVCNoJ8ID/j1T2NlHpS2mAKgKuhp1vCUr5ctCLoyhwaQb14V9PL1G0Hw7w0BAVYhrFgQqoL9TGd0AI0wJQjGyrwzBYBMo2AP35s2/jd5ydq8NQWAzHjBcb4/Z94b2BZTAMhMFJzkM9/8lTkogMxYwcVWECbq2JwBQCP8MP45XJG9IQWAzHgNdT6/aN0bpDLHBtAIBaO6MltO7SkAflfmJ9IWHaf2mAAawVOZwwP49wZ0RgfQCG+ZFcepPSyArsxTjlN7aACNMOc4tYcG0JV53nFqDwug2+KQY2+ID+DZG6QyZwDQCIuOU3tYAF2ZbzhO7fEBZDyn9hQA6tQuCMtrzGyzYJ8Upf8OAGA7029M9+q2SITH/DmvDLkveO0AcJh5Ads8Zw4luAm6ECaZvWluggBOMO8cCEEB/Ah3mN0ZAPTHVD8YERrMQAoAwy+gZ4G5xGzLArCJucbMGhHOM93RATTCKPPdgPCVOScI0QF0SbrlR4gG4Ef4xJxiulKcxAD0MXeZJQdC7IsQgF3MQ39lDgrgqMyPmIMpALyVOQGAHyEFgLcyJwAwV2Y9I8yONDdBAJeZL/69IS6A3hvsbTEcwD+ozLEA/AhnmK7wAArhtrcyhwVw7A0fmWMpAPyn9uAACuEo87qVtpgCwFmZbyYAcCEsMEspAByVGWkANEJCAHtlTghgP7UnBLBX5twABoT8APbKnB9An9qzA9j3BgPA57WGAL3tCOBoi/gFAXfqC2SJNlAAAAAASUVORK5CYII=);background-repeat:no-repeat;background-size:30px;background-position:10px 13px;padding:10px 10px 0 50px;margin:0;height:100vh}#application{height:100%;overflow:hidden}#application .loading{z-index:100;background-color:#fff;display:flex;justify-content:center;margin:0}
</style>
  </head>
  <body>
    <div id="application">
      <p class="loading" align="justify">
        This window is bridging the communication between the Nebulant Builder and the Nebulant CLI.
        <br />
        Please, don't close this window, it will be closed automatically when you disconnect from the Nebulant CLI.
      </p>
  </body>
</html>
