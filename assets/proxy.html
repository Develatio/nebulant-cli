<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <link rel="shortcut icon" type="image/x-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABMCAYAAADdq7GlAAADBUlEQVR4Ad3aAWSVcRQF8FmaqjVJCDbLIIVKAgUZFSBQRAQTSAgF8n9vsRAyIW/b+4go1AAqCVUoSUjBmIZCZlZtLJvTuYRrqN13qXfv5bDnfbb5MTv3eh0TNcxY0xzGhUbB+o42HgCnmWfM9J8iAGglYwWD7YwAYIiZwl/GDKAyT4QjVcG6dACGzDQLDghCPgA7QmdCAANCDQMGhHQAIMB7pi8hgCF13Kvq6MkHYAgBGtUwtuQDMIQA1wUhJ4ABoXkVG7MBLFmel8o8XrAhDUCzjkkrAgHOSmVOAVCNoJ8ID/j1T2NlHpS2mAKgKuhp1vCUr5ctCLoyhwaQb14V9PL1G0Hw7w0BAVYhrFgQqoL9TGd0AI0wJQjGyrwzBYBMo2AP35s2/jd5ydq8NQWAzHjBcb4/Z94b2BZTAMhMFJzkM9/8lTkogMxYwcVWECbq2JwBQCP8MP45XJG9IQWAzHgNdT6/aN0bpDLHBtAIBaO6MltO7SkAflfmJ9IWHaf2mAAawVOZwwP49wZ0RgfQCG+ZFcepPSyArsxTjlN7aACNMOc4tYcG0JV53nFqDwug2+KQY2+ID+DZG6QyZwDQCIuOU3tYAF2ZbzhO7fEBZDyn9hQA6tQuCMtrzGyzYJ8Upf8OAGA7029M9+q2SITH/DmvDLkveO0AcJh5Ads8Zw4luAm6ECaZvWluggBOMO8cCEEB/Ah3mN0ZAPTHVD8YERrMQAoAwy+gZ4G5xGzLArCJucbMGhHOM93RATTCKPPdgPCVOScI0QF0SbrlR4gG4Ef4xJxiulKcxAD0MXeZJQdC7IsQgF3MQ39lDgrgqMyPmIMpALyVOQGAHyEFgLcyJwAwV2Y9I8yONDdBAJeZL/69IS6A3hvsbTEcwD+ozLEA/AhnmK7wAArhtrcyhwVw7A0fmWMpAPyn9uAACuEo87qVtpgCwFmZbyYAcCEsMEspAByVGWkANEJCAHtlTghgP7UnBLBX5twABoT8APbKnB9An9qzA9j3BgPA57WGAL3tCOBoi/gFAXfqC2SJNlAAAAAASUVORK5CYII=">
    <title>Nebulant CLI Proxy</title>
    <script type="module" crossorigin>(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=n(e);fetch(e.href,r)}})();const h=new Map;class w{fetch(o,n={},s={}){let{__request_id:e,timeout:r}=s,u;e||(e=`${new Date().getTime()}-${Math.random()}`);const t=new AbortController;if(h.has(e)){const f=[...h.get(e).abortControllers,t];h.set(e,{abortControllers:f}),f[0].abort("Abort")}else h.set(e,{abortControllers:[t]});return r&&(u=setTimeout(()=>t.abort("Timeout"),r)),s.signal=t.signal,delete s.__request_id,delete s.timeout,new Promise((d,f)=>{const{signal:b}=s;fetch(o,{...Object.keys(n).length>0&&{body:JSON.stringify(n)},...b&&{signal:b},...s}).then(a=>{a.ok?a.text().then(c=>{try{c=JSON.parse(c),d({data:c,status:a.status})}catch{d({data:c,status:a.status})}}).catch(c=>{d({data:null,status:a.status})}):a.text().then(c=>{try{c=JSON.parse(c),f({data:c,response:!0,status:a.status})}catch{f({data:null,response:!0,status:a.status})}}).catch(c=>{f({data:null,response:!0,status:a.status})})}).catch(a=>{f({error:a,response:!1})}).finally(()=>{clearTimeout(u);const a=h.get(e);a.abortControllers.splice(0,1),a.abortControllers.length===0?h.delete(e):h.set(e,a)})})}get(o,n){return this.fetch(o,{},{method:"GET",...n})}post(o,n,s){return this.fetch(o,n,{method:"POST",...s})}patch(o,n,s){return this.fetch(o,n,{method:"PATCH",...s})}}let g="*",m=null;const y=i=>{let{command:o,target:n,data:s,opts:e,msgid:r,nebulant:u}=i.data;if(u)switch(o){case"openws":m=new WebSocket(n),m.onopen=t=>{t={type:t.type},l({command:"onWebSocketOpen",status:"ok",data:t})},m.onclose=t=>{t={wasClea:t.wasClean,code:t.code,reason:t.reason},l({command:"onWebSocketClose",status:"ok",data:t})},m.onerror=t=>{t={message:t.message,error:t.error},l({command:"onWebSocketError",status:"ko",data:t})},m.onmessage=t=>{t={data:t.data,origin:t.origin},l({command:"onWebSocketMessage",status:"ok",data:t})};break;case"closews":if(m){try{m.close(s.status)}catch{}m=null}break;case"get":new w().get(n,e).then(t=>{t=structuredClone(t),l({command:"command_reply",msgid:r,status:"ok",data:t})}).catch(t=>{const d=structuredClone(t);l({command:"command_reply",msgid:r,status:"ko",data:d})});break;case"post":new w().post(n,s,e).then(t=>{t=structuredClone(t),l({command:"command_reply",msgid:r,status:"ok",data:t})}).catch(t=>{const d=structuredClone(t);l({command:"command_reply",msgid:r,status:"ko",data:d})});break}},l=i=>{const o=window.opener;o&&(o.closed||o.postMessage({...i,nebulant:!0},g))};window.onload=()=>{g=new URLSearchParams(window.location.search).get("targetOrigin"),l({command:"onLoaded",status:"ok"})};window.onbeforeunload=function(){l({command:"onUnload",status:"ok"})};window.onunload=function(){window.close()};window.addEventListener("message",i=>{const{protocol:o,host:n}=new URL(i.origin);if(`${o}//${n}`===g)try{y(i)}catch(e){console.error(e)}});
</script>
    <style rel="stylesheet" crossorigin>body{background:linear-gradient(#16161d,#1f1f3a,#3b2f4a);padding:15px 10px;margin:0;height:100vh}#application{height:100%;overflow:hidden;color:#fff;display:flex;gap:10px}#application .logo{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABMCAYAAADdq7GlAAADBUlEQVR4Ad3aAWSVcRQF8FmaqjVJCDbLIIVKAgUZFSBQRAQTSAgF8n9vsRAyIW/b+4go1AAqCVUoSUjBmIZCZlZtLJvTuYRrqN13qXfv5bDnfbb5MTv3eh0TNcxY0xzGhUbB+o42HgCnmWfM9J8iAGglYwWD7YwAYIiZwl/GDKAyT4QjVcG6dACGzDQLDghCPgA7QmdCAANCDQMGhHQAIMB7pi8hgCF13Kvq6MkHYAgBGtUwtuQDMIQA1wUhJ4ABoXkVG7MBLFmel8o8XrAhDUCzjkkrAgHOSmVOAVCNoJ8ID/j1T2NlHpS2mAKgKuhp1vCUr5ctCLoyhwaQb14V9PL1G0Hw7w0BAVYhrFgQqoL9TGd0AI0wJQjGyrwzBYBMo2AP35s2/jd5ydq8NQWAzHjBcb4/Z94b2BZTAMhMFJzkM9/8lTkogMxYwcVWECbq2JwBQCP8MP45XJG9IQWAzHgNdT6/aN0bpDLHBtAIBaO6MltO7SkAflfmJ9IWHaf2mAAawVOZwwP49wZ0RgfQCG+ZFcepPSyArsxTjlN7aACNMOc4tYcG0JV53nFqDwug2+KQY2+ID+DZG6QyZwDQCIuOU3tYAF2ZbzhO7fEBZDyn9hQA6tQuCMtrzGyzYJ8Upf8OAGA7029M9+q2SITH/DmvDLkveO0AcJh5Ads8Zw4luAm6ECaZvWluggBOMO8cCEEB/Ah3mN0ZAPTHVD8YERrMQAoAwy+gZ4G5xGzLArCJucbMGhHOM93RATTCKPPdgPCVOScI0QF0SbrlR4gG4Ef4xJxiulKcxAD0MXeZJQdC7IsQgF3MQ39lDgrgqMyPmIMpALyVOQGAHyEFgLcyJwAwV2Y9I8yONDdBAJeZL/69IS6A3hvsbTEcwD+ozLEA/AhnmK7wAArhtrcyhwVw7A0fmWMpAPyn9uAACuEo87qVtpgCwFmZbyYAcCEsMEspAByVGWkANEJCAHtlTghgP7UnBLBX5twABoT8APbKnB9An9qzA9j3BgPA57WGAL3tCOBoi/gFAXfqC2SJNlAAAAAASUVORK5CYII=);background-repeat:no-repeat;background-size:30px;background-position:center;width:40px;height:40px;min-width:40px;min-height:40px}#application .loading{justify-content:center;margin:0}
</style>
  </head>
  <body>
    <div id="application">
      <div class="logo"></div>
      <p class="loading" align="justify">
        This window is bridging the communication between the Nebulant Builder and the Nebulant CLI.
        <br />
        Please, don't close this window, it will be closed automatically when you disconnect from the Nebulant CLI.
      </p>
  </body>
</html>
